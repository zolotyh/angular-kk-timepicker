!function e(t,r,n){function a(o,u){if(!r[o]){if(!t[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return a(r?r:e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,r){"use strict";e("./module"),e("./factories/timepickerFactory"),e("./directives/timpicker")},{"./directives/timpicker":2,"./factories/timepickerFactory":3,"./module":4}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),e("../factories/timepickerFactory");var a=function i(e){var t=this;n(this,i),this.link=function(e,r,n,a){var i=angular.element(r[0].querySelector(".js-input")),o=angular.element(r[0].querySelector(".js-native-input")),u=38,s=40,c=t.factory;e.touch="ontouchstart"in window;var l={addZero:!0,"default":function(){return new Date}};l=angular.extend(l,e.settings),e.$watch("date",function(t,r){if(t===r&&!a.$viewValue){e.date=l["default"]();var n=c.formatString(e.date,l);a.$setViewValue(n),i.val(n)}a.$viewValue&&(e.date=c.parseString(a.$viewValue,l)),t&&(e.hours=c.getHours(e.date,l),e.minutes=c.getMinutes(e.date,l),e.flag=c.getFlag(e.date,l))},!0),a.$formatters.push(function(e){return c.convert(e,l)||e}),a.$parsers.push(function(e){return c.convert(e,l)||e});var f="timeStringParse";a.$validators[f]=function(e){return!!c.convert(e,l)};var d=function(){var t=c.formatString(e.date,l);i.val(t),a.$setViewValue(t)},v=function(e,t){var r=void 0,n=void 0;return 2>=e?(r=0,n=2):e>2&&6>e?(r=3,n=5):(r=6,n=t.length),{start:r,end:n}};i.on("focusin",function(e){var t=i[0],r=i.val(),n=c.checkValidity(r);n&&setTimeout(function(){var e=t.selectionStart,n=v(e,r);t.setSelectionRange(n.start,n.end)})}),i.on("keydown",function(t){var r=function(t){var r=i.val(),n=i[0],a=n.selectionStart;2>=a?e.addHours(t):a>2&&6>a?e.addMinutes(t):e.changeFlag(t);var o=v(a,r);n.setSelectionRange(o.start,o.end)};t.which===s?(r(-1),t.preventDefault()):t.which===u&&(r(1),t.preventDefault())}),i.on("blur",function(){i.off("kydown.kktimepicker")}),i.on("change",function(){var t=c.convert(i.val(),l);e.date=c.parseString(t,l),e.date&&d()}),a.$render=function(){console.log(a),setTimeout(function(){var t=a.$viewValue;e.date=c.parseString(t,l),e.touch?o.val(c.convert(t,{use24HoursFormat:!0,addZero:!0})):i.val(t)})},o.on("change",function(t){e.touch&&a.$setViewValue(o.val())}),e.togglePopover=function(){e.touch||e.ngDisabled||(e.popoverIsOpen=!e.popoverIsOpen)},e.addMinutes=function(t){e.date||(e.date=l["default"]());var r=e.date.getMinutes();e.date.setMinutes(r+t),d()},e.changeFlag=function(){e.date||(e.date=l["default"]());var t=e.date.getHours();0===t?(e.date.setHours(12),d()):12===t?(e.date.setHours(0),d()):e.addHours(12)},e.addHours=function(t){e.date||(e.date=l["default"]());var r=e.date.getHours();e.date.setHours(r+t),e.hours=c.getHours(e.date,l),d()},e.changeTimeFromPopover=function(t,r){if(e.date||(e.date=l["default"]()),"flag"===r){if("AM"===t.toUpperCase()&&e.date.getHours()>12)return void e.addHours(12);if("PM"===t.toUpperCase()&&e.date.getHours()<=12)return void e.addHours(12)}else{var n=parseInt(t,10);if(c.isNaN(n))return void(t="");"minute"===r&&e.date.setMinutes(n),"hour"===r&&e.date.setHours(n),d()}},e.closePopover=function(){e.popoverIsOpen=!1,e.$digest()},angular.element(document).on("click",e.closePopover),e.$on("$destroy",function(){angular.element(document).off("click",e.closePopover)})},this.scope={settings:"=",ngDisabled:"="},this.priority=101,this.replace=!0,this.require="ngModel",this.templateUrl="directives/kk.timepicker.tpl.html",this.factory=e};angular.module("kk.timepicker").directive("kkTimepicker",["kkTimepickerFactory",function(e){return new a(e)}]),r["default"]=a},{"../factories/timepickerFactory":3}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){n(this,e),this.timeRegExp=new RegExp("^([0-2]?[0-9]|2[0-3]|3[0-3])s{0,}?[:]?s{0,}([0-5][0-9]|[0-9])?s{0,}?(am|pm|AM|PM)?$")}return a(e,[{key:"checkValidity",value:function(e){return!!e.split(" ").join("").match(this.timeRegExp)}},{key:"formatDigit",value:function(e,t){return t?this.pad(e):""+e}},{key:"getFlag",value:function(e,t){var r=e.getHours();return 12>r?"AM":"PM"}},{key:"getMinutes",value:function(e,t){return this.formatDigit(e.getMinutes(),!0)}},{key:"getHours",value:function(e,t){var r=e.getHours();return t.use24HoursFormat?this.formatDigit(r,t.addZero):12===r||0===r?"12":r>12?this.formatDigit(r-12,t.addZero):this.formatDigit(r,t.addZero)}},{key:"pad",value:function(e){return 10>e?"0"+e:""+e}},{key:"isNaN",value:function(e){return e!==e}},{key:"convert",value:function(e,t){var r=this.parseString(e,t);return r?this.formatString(r,t):""}},{key:"formatString",value:function(e,t){var r=void 0,n=void 0,a=e.getHours();t.use24HoursFormat?(n=a,r=this.getFlag(e,t)):12===a||0===a?(r=this.getFlag(e,t),n=12):a>12?(n=a-12,r=this.getFlag(e,t)):(n=a,r=this.getFlag(e,t));var i=t.addZero?this.pad(n):n,o=this.pad(e.getMinutes());return t.use24HoursFormat?i+":"+o:i+":"+o+" "+r}},{key:"parseString",value:function(e,t){if(!e)return null;e=e.split(" ").join("");var r=e.match(this.timeRegExp);if(!r)return null;var n=r[1]||"",a=r[2]||"",i=r[3]||"",o=new Date(0),u=parseInt(n,10),s=parseInt(a,10);return u=this.isNaN(u)?0:u,s=this.isNaN(s)?0:s,u>24?null:s>59?null:(u>=12?"am"===i.toLowerCase()?o.setHours(u-12):o.setHours(u):"pm"===i.toLowerCase()?o.setHours(u+12):o.setHours(u),o.setMinutes(s),o)}}]),e}();angular.module("kk.timepicker").factory("kkTimepickerFactory",function(){return new i}),r["default"]=i},{}],4:[function(e,t,r){"use strict";angular.module("kk.timepicker",[])},{}]},{},[1]);
//# sourceMappingURL=angular-kk-timepicker.min.js.map
