{"version":3,"sources":["angular-kk-timepicker.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","./directives/timpicker","./factories/timepickerFactory","./module",2,"_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","Timepicker","factory","_this","this","link","scope","element","attrs","modelCtrl","$input","angular","querySelector","$nativeInput","UP","DOWN","touch","window","settings","addZero","default","Date","extend","$watch","newValue","oldValue","$viewValue","date","formatString","$setViewValue","val","parseString","hours","getHours","minutes","getMinutes","flag","getFlag","$formatters","push","convert","$parsers","error","$validators","modelValue","changeModel","calcSelection","cursorStart","start","undefined","end","on","input","valueIsValid","checkValidity","setTimeout","selectionStart","selection","setSelectionRange","keyDownEvent","switchPosition","inputValue","addHours","addMinutes","changeFlag","which","preventDefault","off","$render","console","log","use24HoursFormat","event","togglePopover","ngDisabled","popoverIsOpen","current","setMinutes","setHours","changeTimeFromPopover","type","toUpperCase","parsedValue","parseInt","isNaN","closePopover","$digest","document","$on","priority","replace","templateUrl","directive","kkTimepickerFactory","../factories/timepickerFactory",3,"_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","TimepickerFactory","timeRegExp","RegExp","split","join","match","digit","pad","formatDigit","hoursStr","str","parseResults","hoursValue","minutesValue","toLowerCase",4],"mappings":"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","file":"angular-kk-timepicker.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nrequire('./module');\n\nrequire('./factories/timepickerFactory');\n\nrequire('./directives/timpicker');\n},{\"./directives/timpicker\":2,\"./factories/timepickerFactory\":3,\"./module\":4}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nrequire('../factories/timepickerFactory');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } ///<reference path=\"./timepicker.d.ts\" />\n///<reference path=\"../factories/timepickerFactory.d.ts\" />\n///<reference path=\"../../typings/tsd.d.ts\" />\n\nvar Timepicker = function Timepicker(factory) {\n    var _this = this;\n\n    _classCallCheck(this, Timepicker);\n\n    this.link = function (scope, element, attrs, modelCtrl) {\n        var $input = angular.element(element[0].querySelector('.js-input')),\n            $nativeInput = angular.element(element[0].querySelector('.js-native-input')),\n            UP = 38,\n            DOWN = 40,\n            factory = _this.factory;\n        scope.touch = 'ontouchstart' in window;\n        var settings = {\n            addZero: true,\n            default: function _default() {\n                return new Date();\n            }\n        };\n        settings = angular.extend(settings, scope.settings);\n        scope.$watch('date', function (newValue, oldValue) {\n            if (newValue === oldValue && !modelCtrl.$viewValue) {\n                scope.date = settings.default();\n                var value = factory.formatString(scope.date, settings);\n                modelCtrl.$setViewValue(value);\n                $input.val(value);\n            }\n            if (modelCtrl.$viewValue) {\n                scope.date = factory.parseString(modelCtrl.$viewValue, settings);\n            }\n            if (!newValue) {\n                return;\n            }\n            scope.hours = factory.getHours(scope.date, settings);\n            scope.minutes = factory.getMinutes(scope.date, settings);\n            scope.flag = factory.getFlag(scope.date, settings);\n        }, true);\n        modelCtrl.$formatters.push(function (value) {\n            return factory.convert(value, settings) || value;\n        });\n        modelCtrl.$parsers.push(function (value) {\n            return factory.convert(value, settings) || value;\n        });\n        var error = 'timeStringParse';\n        modelCtrl.$validators[error] = function (modelValue) {\n            return !!factory.convert(modelValue, settings);\n        };\n        var changeModel = function changeModel() {\n            var value = factory.formatString(scope.date, settings);\n            $input.val(value);\n            modelCtrl.$setViewValue(value);\n        };\n        var calcSelection = function calcSelection(cursorStart, value) {\n            var start = undefined;\n            var end = undefined;\n            if (cursorStart <= 2) {\n                start = 0;\n                end = 2;\n            } else if (cursorStart > 2 && cursorStart < 6) {\n                start = 3;\n                end = 5;\n            } else {\n                start = 6;\n                end = value.length;\n            }\n            return {\n                start: start,\n                end: end\n            };\n        };\n        $input.on('focusin', function (e) {\n            var input = $input[0];\n            var value = $input.val();\n            var valueIsValid = factory.checkValidity(value);\n            if (!valueIsValid) {\n                return;\n            }\n            setTimeout(function () {\n                var cursorStart = input.selectionStart;\n                var selection = calcSelection(cursorStart, value);\n                input.setSelectionRange(selection.start, selection.end);\n            });\n        });\n        $input.on('keydown', function (keyDownEvent) {\n            var switchPosition = function switchPosition(value) {\n                var inputValue = $input.val();\n                var input = $input[0];\n                var cursorStart = input.selectionStart;\n                if (cursorStart <= 2) {\n                    scope.addHours(value);\n                } else if (cursorStart > 2 && cursorStart < 6) {\n                    scope.addMinutes(value);\n                } else {\n                    scope.changeFlag(value);\n                }\n                var selection = calcSelection(cursorStart, inputValue);\n                input.setSelectionRange(selection.start, selection.end);\n            };\n            if (keyDownEvent.which === DOWN) {\n                switchPosition(-1);\n                keyDownEvent.preventDefault();\n            } else if (keyDownEvent.which === UP) {\n                switchPosition(1);\n                keyDownEvent.preventDefault();\n            }\n        });\n        $input.on('blur', function () {\n            $input.off('kydown.kktimepicker');\n        });\n        $input.on('change', function () {\n            var value = factory.convert($input.val(), settings);\n            scope.date = factory.parseString(value, settings);\n            if (scope.date) {\n                changeModel();\n            }\n        });\n        modelCtrl.$render = function () {\n            console.log(modelCtrl);\n            setTimeout(function () {\n                var value = modelCtrl.$viewValue;\n                scope.date = factory.parseString(value, settings);\n                if (scope.touch) {\n                    $nativeInput.val(factory.convert(value, { use24HoursFormat: true, addZero: true }));\n                } else {\n                    $input.val(value);\n                }\n            });\n        };\n        $nativeInput.on('change', function (event) {\n            if (scope.touch) {\n                modelCtrl.$setViewValue($nativeInput.val());\n            }\n        });\n        scope.togglePopover = function () {\n            if (!scope.touch && !scope.ngDisabled) {\n                scope.popoverIsOpen = !scope.popoverIsOpen;\n            }\n        };\n        scope.addMinutes = function (value) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getMinutes();\n            scope.date.setMinutes(current + value);\n            changeModel();\n        };\n        scope.changeFlag = function () {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getHours();\n            if (current === 0) {\n                scope.date.setHours(12);\n                changeModel();\n            } else if (current === 12) {\n                scope.date.setHours(0);\n                changeModel();\n            } else {\n                scope.addHours(12);\n            }\n        };\n        scope.addHours = function (value) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getHours();\n            scope.date.setHours(current + value);\n            scope.hours = factory.getHours(scope.date, settings);\n            changeModel();\n        };\n        scope.changeTimeFromPopover = function (value, type) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            if (type === 'flag') {\n                if (value.toUpperCase() === 'AM' && scope.date.getHours() > 12) {\n                    scope.addHours(12);\n                    return;\n                }\n                if (value.toUpperCase() === 'PM' && scope.date.getHours() <= 12) {\n                    scope.addHours(12);\n                    return;\n                }\n            } else {\n                var parsedValue = parseInt(value, 10);\n                if (factory.isNaN(parsedValue)) {\n                    value = '';\n                    return;\n                }\n                if (type === 'minute') {\n                    scope.date.setMinutes(parsedValue);\n                }\n                if (type === 'hour') {\n                    scope.date.setHours(parsedValue);\n                }\n                changeModel();\n            }\n        };\n        scope.closePopover = function () {\n            scope.popoverIsOpen = false;scope.$digest();\n        };\n        angular.element(document).on('click', scope.closePopover);\n        scope.$on('$destroy', function () {\n            angular.element(document).off('click', scope.closePopover);\n        });\n    };\n    this.scope = {\n        settings: '=',\n        ngDisabled: '='\n    };\n    this.priority = 101;\n    this.replace = true;\n    this.require = 'ngModel';\n    this.templateUrl = 'directives/kk.timepicker.tpl.html';\n    this.factory = factory;\n};\n\nangular.module('kk.timepicker').directive('kkTimepicker', ['kkTimepickerFactory', function (kkTimepickerFactory) {\n    return new Timepicker(kkTimepickerFactory);\n}]);\nexports.default = Timepicker;\n},{\"../factories/timepickerFactory\":3}],3:[function(require,module,exports){\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n///<reference path=\"../../typings/tsd.d.ts\" />\n///<reference path=\"./timepickerFactory.d.ts\" />\n\nvar TimepickerFactory = (function () {\n    function TimepickerFactory() {\n        _classCallCheck(this, TimepickerFactory);\n\n        this.timeRegExp = new RegExp('^([0-2]?[0-9]|2[0-3]|3[0-3])\\s{0,}?[:]?\\s{0,}([0-5][0-9]|[0-9])?\\s{0,}?(am|pm|AM|PM)?$');\n    }\n\n    _createClass(TimepickerFactory, [{\n        key: 'checkValidity',\n        value: function checkValidity(value) {\n            return !!value.split(' ').join('').match(this.timeRegExp);\n        }\n    }, {\n        key: 'formatDigit',\n        value: function formatDigit(digit, addZero) {\n            return addZero ? this.pad(digit) : '' + digit;\n        }\n    }, {\n        key: 'getFlag',\n        value: function getFlag(date, settings) {\n            var hours = date.getHours();\n            return hours < 12 ? 'AM' : 'PM';\n        }\n    }, {\n        key: 'getMinutes',\n        value: function getMinutes(date, settings) {\n            return this.formatDigit(date.getMinutes(), true);\n        }\n    }, {\n        key: 'getHours',\n        value: function getHours(date, settings) {\n            var hours = date.getHours();\n            // return 24 format\n            if (settings.use24HoursFormat) {\n                return this.formatDigit(hours, settings.addZero);\n            }\n            // if 12 hours\n            if (hours === 12 || hours === 0) {\n                return '12';\n            }\n            // if more then 12 ours\n            if (hours > 12) {\n                return this.formatDigit(hours - 12, settings.addZero);\n            }\n            // other\n            return this.formatDigit(hours, settings.addZero);\n        }\n    }, {\n        key: 'pad',\n        value: function pad(value) {\n            return value < 10 ? '0' + value : '' + value;\n        }\n    }, {\n        key: 'isNaN',\n        value: function isNaN(value) {\n            return value !== value;\n        }\n    }, {\n        key: 'convert',\n        value: function convert(value, settings) {\n            var date = this.parseString(value, settings);\n            return date ? this.formatString(date, settings) : '';\n        }\n    }, {\n        key: 'formatString',\n        value: function formatString(date, settings) {\n            var flag = undefined;\n            var hours = undefined;\n            var value = date.getHours();\n            if (!settings.use24HoursFormat) {\n                if (value === 12 || value === 0) {\n                    flag = this.getFlag(date, settings);\n                    hours = 12;\n                } else if (value > 12) {\n                    hours = value - 12;\n                    flag = this.getFlag(date, settings);\n                } else {\n                    hours = value;\n                    flag = this.getFlag(date, settings);\n                }\n            } else {\n                hours = value;\n                flag = this.getFlag(date, settings);\n            }\n            var hoursStr = settings.addZero ? this.pad(hours) : hours;\n            var minutes = this.pad(date.getMinutes());\n            if (settings.use24HoursFormat) {\n                return hoursStr + ':' + minutes;\n            } else {\n                return hoursStr + ':' + minutes + ' ' + flag;\n            }\n        }\n    }, {\n        key: 'parseString',\n        value: function parseString(str, settings) {\n            if (!str) {\n                return null;\n            }\n            str = str.split(' ').join('');\n            var parseResults = str.match(this.timeRegExp);\n            if (!parseResults) {\n                return null;\n            }\n            var hours = parseResults[1] || '';\n            var minutes = parseResults[2] || '';\n            var flag = parseResults[3] || '';\n            var date = new Date(0);\n            var hoursValue = parseInt(hours, 10);\n            var minutesValue = parseInt(minutes, 10);\n            hoursValue = this.isNaN(hoursValue) ? 0 : hoursValue;\n            minutesValue = this.isNaN(minutesValue) ? 0 : minutesValue;\n            // hack @todo needs to remake reg exp\n            if (hoursValue > 24) {\n                return null;\n            }\n            if (minutesValue > 59) {\n                return null;\n            }\n            if (hoursValue >= 12) {\n                if (flag.toLowerCase() === 'am') {\n                    date.setHours(hoursValue - 12);\n                } else {\n                    date.setHours(hoursValue);\n                }\n            } else {\n                if (flag.toLowerCase() === 'pm') {\n                    date.setHours(hoursValue + 12);\n                } else {\n                    date.setHours(hoursValue);\n                }\n            }\n            date.setMinutes(minutesValue);\n            return date;\n        }\n    }]);\n\n    return TimepickerFactory;\n})();\n\nangular.module('kk.timepicker').factory('kkTimepickerFactory', function () {\n    return new TimepickerFactory();\n});\nexports.default = TimepickerFactory;\n},{}],4:[function(require,module,exports){\n'use strict';\n\n///<reference path=\"../typings/tsd.d.ts\" />\nangular.module('kk.timepicker', []);\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}