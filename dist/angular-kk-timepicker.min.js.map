{"version":3,"sources":["angular-kk-timepicker.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","./directives/timpicker","./factories/timepickerFactory","./module",2,"_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","Timepicker","factory","_this","this","link","scope","element","attrs","modelCtrl","$input","angular","querySelector","UP","DOWN","settings","addZero","default","Date","extend","$watch","newValue","oldValue","$viewValue","date","formatString","$setViewValue","val","parseString","hours","getHours","minutes","getMinutes","flag","getFlag","$formatters","push","convert","$parsers","error","$validators","modelValue","changeModel","calcSelection","cursorStart","start","undefined","end","on","input","valueIsValid","checkValidity","setTimeout","selectionStart","selection","setSelectionRange","keyDownEvent","switchPosition","inputValue","addHours","addMinutes","changeFlag","which","preventDefault","off","$render","togglePopover","popoverIsOpen","current","setMinutes","setHours","changeTimeFromPopover","type","toUpperCase","parsedValue","parseInt","isNaN","closePopover","$digest","document","$on","ngDisabled","priority","replace","templateUrl","directive","kkTimepickerFactory","../factories/timepickerFactory",3,"_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","TimepickerFactory","timeRegExp","RegExp","split","join","match","digit","pad","formatDigit","use24HoursFormat","hoursStr","str","parseResults","hoursValue","minutesValue","toLowerCase",4],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAEAN,GAAQ,YAERA,EAAQ,iCAERA,EAAQ,4BACLW,yBAAyB,EAAEC,gCAAgC,EAAEC,WAAW,IAAIC,GAAG,SAASd,EAAQU,EAAOJ,GAC1G,YAQA,SAASS,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAed,EAAS,cAC3Be,OAAO,IAGXrB,EAAQ,iCAMR,IAAIsB,GAAa,QAASA,GAAWC,GACjC,GAAIC,GAAQC,IAEZV,GAAgBU,KAAMH,GAEtBG,KAAKC,KAAO,SAAUC,EAAOC,EAASC,EAAOC,GACzC,GAAIC,GAASC,QAAQJ,QAAQA,EAAQ,GAAGK,cAAc,cAClDC,EAAK,GACLC,EAAO,GACPZ,EAAUC,EAAMD,QAChBa,GACAC,SAAS,EACTC,UAAS,WACL,MAAO,IAAIC,OAGnBH,GAAWJ,QAAQQ,OAAOJ,EAAUT,EAAMS,UAC1CT,EAAMc,OAAO,OAAQ,SAAUC,EAAUC,GACrC,GAAID,IAAaC,IAAab,EAAUc,WAAY,CAChDjB,EAAMkB,KAAOT,EAAAA,YACb,IAAIf,GAAQE,EAAQuB,aAAanB,EAAMkB,KAAMT,EAC7CN,GAAUiB,cAAc1B,GACxBU,EAAOiB,IAAI3B,GAEXS,EAAUc,aACVjB,EAAMkB,KAAOtB,EAAQ0B,YAAYnB,EAAUc,WAAYR,IAEtDM,IAGLf,EAAMuB,MAAQ3B,EAAQ4B,SAASxB,EAAMkB,KAAMT,GAC3CT,EAAMyB,QAAU7B,EAAQ8B,WAAW1B,EAAMkB,KAAMT,GAC/CT,EAAM2B,KAAO/B,EAAQgC,QAAQ5B,EAAMkB,KAAMT,MAC1C,GACHN,EAAU0B,YAAYC,KAAK,SAAUpC,GACjC,MAAOE,GAAQmC,QAAQrC,EAAOe,IAAaf,IAE/CS,EAAU6B,SAASF,KAAK,SAAUpC,GAC9B,MAAOE,GAAQmC,QAAQrC,EAAOe,IAAaf,GAE/C,IAAIuC,GAAQ,iBACZ9B,GAAU+B,YAAYD,GAAS,SAAUE,GACrC,QAASvC,EAAQmC,QAAQI,EAAY1B,GAEzC,IAAI2B,GAAc,WACd,GAAI1C,GAAQE,EAAQuB,aAAanB,EAAMkB,KAAMT,EAC7CL,GAAOiB,IAAI3B,GACXS,EAAUiB,cAAc1B,IAExB2C,EAAgB,SAAuBC,EAAa5C,GACpD,GAAI6C,GAAQC,OACRC,EAAMD,MAWV,OAVmB,IAAfF,GACAC,EAAQ,EACRE,EAAM,GACCH,EAAc,GAAmB,EAAdA,GAC1BC,EAAQ,EACRE,EAAM,IAENF,EAAQ,EACRE,EAAM/C,EAAMb,SAGZ0D,MAAOA,EACPE,IAAKA,GAGbrC,GAAOsC,GAAG,UAAW,SAAU7E,GAC3B,GAAI8E,GAAQvC,EAAO,GACfV,EAAQU,EAAOiB,MACfuB,EAAehD,EAAQiD,cAAcnD,EACpCkD,IAGLE,WAAW,WACP,GAAIR,GAAcK,EAAMI,eACpBC,EAAYX,EAAcC,EAAa5C,EAC3CiD,GAAMM,kBAAkBD,EAAUT,MAAOS,EAAUP,SAG3DrC,EAAOsC,GAAG,UAAW,SAAUQ,GAC3B,GAAIC,GAAiB,SAAwBzD,GACzC,GAAI0D,GAAahD,EAAOiB,MACpBsB,EAAQvC,EAAO,GACfkC,EAAcK,EAAMI,cACL,IAAfT,EACAtC,EAAMqD,SAAS3D,GACR4C,EAAc,GAAmB,EAAdA,EAC1BtC,EAAMsD,WAAW5D,GAEjBM,EAAMuD,WAAW7D,EAErB,IAAIsD,GAAYX,EAAcC,EAAac,EAC3CT,GAAMM,kBAAkBD,EAAUT,MAAOS,EAAUP,KAEnDS,GAAaM,QAAUhD,GACvB2C,EAAe,IACfD,EAAaO,kBACNP,EAAaM,QAAUjD,IAC9B4C,EAAe,GACfD,EAAaO,oBAGrBrD,EAAOsC,GAAG,OAAQ,WACdtC,EAAOsD,IAAI,yBAEftD,EAAOsC,GAAG,SAAU,WAChB,GAAIhD,GAAQE,EAAQmC,QAAQ3B,EAAOiB,MAAOZ,EAC1CT,GAAMkB,KAAOtB,EAAQ0B,YAAY5B,EAAOe,GACpCT,EAAMkB,MACNkB,MAGRjC,EAAUwD,QAAU,WAChB3D,EAAMkB,KAAOtB,EAAQ0B,YAAYnB,EAAUc,WAAYR,GACvDL,EAAOiB,IAAIlB,EAAUc,aAEzBjB,EAAM4D,cAAgB,WAClB5D,EAAM6D,eAAiB7D,EAAM6D,eAEjC7D,EAAMsD,WAAa,SAAU5D,GACpBM,EAAMkB,OACPlB,EAAMkB,KAAOT,EAAAA,aAEjB,IAAIqD,GAAU9D,EAAMkB,KAAKQ,YACzB1B,GAAMkB,KAAK6C,WAAWD,EAAUpE,GAChC0C,KAEJpC,EAAMuD,WAAa,WACVvD,EAAMkB,OACPlB,EAAMkB,KAAOT,EAAAA,aAEjB,IAAIqD,GAAU9D,EAAMkB,KAAKM,UACT,KAAZsC,GACA9D,EAAMkB,KAAK8C,SAAS,IACpB5B,KACmB,KAAZ0B,GACP9D,EAAMkB,KAAK8C,SAAS,GACpB5B,KAEApC,EAAMqD,SAAS,KAGvBrD,EAAMqD,SAAW,SAAU3D,GAClBM,EAAMkB,OACPlB,EAAMkB,KAAOT,EAAAA,aAEjB,IAAIqD,GAAU9D,EAAMkB,KAAKM,UACzBxB,GAAMkB,KAAK8C,SAASF,EAAUpE,GAC9BM,EAAMuB,MAAQ3B,EAAQ4B,SAASxB,EAAMkB,KAAMT,GAC3C2B,KAEJpC,EAAMiE,sBAAwB,SAAUvE,EAAOwE,GAI3C,GAHKlE,EAAMkB,OACPlB,EAAMkB,KAAOT,EAAAA,cAEJ,SAATyD,EAAiB,CACjB,GAA4B,OAAxBxE,EAAMyE,eAA0BnE,EAAMkB,KAAKM,WAAa,GAExD,WADAxB,GAAMqD,SAAS,GAGnB,IAA4B,OAAxB3D,EAAMyE,eAA0BnE,EAAMkB,KAAKM,YAAc,GAEzD,WADAxB,GAAMqD,SAAS,QAGhB,CACH,GAAIe,GAAcC,SAAS3E,EAAO,GAClC,IAAIE,EAAQ0E,MAAMF,GAEd,YADA1E,EAAQ,GAGC,YAATwE,GACAlE,EAAMkB,KAAK6C,WAAWK,GAEb,SAATF,GACAlE,EAAMkB,KAAK8C,SAASI,GAExBhC,MAGRpC,EAAMuE,aAAe,WACjBvE,EAAM6D,eAAgB,EAAM7D,EAAMwE,WAEtCnE,QAAQJ,QAAQwE,UAAU/B,GAAG,QAAS1C,EAAMuE,cAC5CvE,EAAM0E,IAAI,WAAY,WAClBrE,QAAQJ,QAAQwE,UAAUf,IAAI,QAAS1D,EAAMuE,iBAGrDzE,KAAKE,OACDS,SAAU,IACVkE,WAAY,KAEhB7E,KAAK8E,SAAW,IAChB9E,KAAK+E,SAAU,EACf/E,KAAKzB,QAAU,UACfyB,KAAKgF,YAAc,oCACnBhF,KAAKF,QAAUA,EAGnBS,SAAQtB,OAAO,iBAAiBgG,UAAU,gBAAiB,sBAAuB,SAAUC,GACxF,MAAO,IAAIrF,GAAWqF,MAE1BrG,EAAAA,WAAkBgB,IACfsF,iCAAiC,IAAIC,GAAG,SAAS7G,EAAQU,EAAOJ,GACnE,YAQA,SAASS,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhH,GAAI4F,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIhH,GAAI,EAAGA,EAAIgH,EAAMzG,OAAQP,IAAK,CAAE,GAAIiH,GAAaD,EAAMhH,EAAIiH,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlG,OAAOC,eAAe4F,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUjG,EAAasG,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiB9F,EAAYwG,UAAWF,GAAiBC,GAAaT,EAAiB9F,EAAauG,GAAqBvG,KAEjiBE,QAAOC,eAAed,EAAS,cAC3Be,OAAO,GAQX,IAAIqG,GAAoB,WACpB,QAASA,KACL3G,EAAgBU,KAAMiG,GAEtBjG,KAAKkG,WAAa,GAAIC,QAAO,uFAoIjC,MAjIAd,GAAaY,IACTJ,IAAK,gBACLjG,MAAO,SAAuBA,GAC1B,QAASA,EAAMwG,MAAM,KAAKC,KAAK,IAAIC,MAAMtG,KAAKkG,eAGlDL,IAAK,cACLjG,MAAO,SAAqB2G,EAAO3F,GAC/B,MAAOA,GAAUZ,KAAKwG,IAAID,GAAS,GAAKA,KAG5CV,IAAK,UACLjG,MAAO,SAAiBwB,EAAMT,GAC1B,GAAIc,GAAQL,EAAKM,UACjB,OAAe,IAARD,EAAa,KAAO,QAG/BoE,IAAK,aACLjG,MAAO,SAAoBwB,EAAMT,GAC7B,MAAOX,MAAKyG,YAAYrF,EAAKQ,cAAc,MAG/CiE,IAAK,WACLjG,MAAO,SAAkBwB,EAAMT,GAC3B,GAAIc,GAAQL,EAAKM,UAEjB,OAAIf,GAAS+F,iBACF1G,KAAKyG,YAAYhF,EAAOd,EAASC,SAG9B,KAAVa,GAA0B,IAAVA,EACT,KAGPA,EAAQ,GACDzB,KAAKyG,YAAYhF,EAAQ,GAAId,EAASC,SAG1CZ,KAAKyG,YAAYhF,EAAOd,EAASC,YAG5CiF,IAAK,MACLjG,MAAO,SAAaA,GAChB,MAAe,IAARA,EAAa,IAAMA,EAAQ,GAAKA,KAG3CiG,IAAK,QACLjG,MAAO,SAAeA,GAClB,MAAOA,KAAUA,KAGrBiG,IAAK,UACLjG,MAAO,SAAiBA,EAAOe,GAC3B,GAAIS,GAAOpB,KAAKwB,YAAY5B,EAAOe,EACnC,OAAOS,GAAOpB,KAAKqB,aAAaD,EAAMT,GAAY,MAGtDkF,IAAK,eACLjG,MAAO,SAAsBwB,EAAMT,GAC/B,GAAIkB,GAAOa,OACPjB,EAAQiB,OACR9C,EAAQwB,EAAKM,UACZf,GAAS+F,kBAYVjF,EAAQ7B,EACRiC,EAAO7B,KAAK8B,QAAQV,EAAMT,IAZZ,KAAVf,GAA0B,IAAVA,GAChBiC,EAAO7B,KAAK8B,QAAQV,EAAMT,GAC1Bc,EAAQ,IACD7B,EAAQ,IACf6B,EAAQ7B,EAAQ,GAChBiC,EAAO7B,KAAK8B,QAAQV,EAAMT,KAE1Bc,EAAQ7B,EACRiC,EAAO7B,KAAK8B,QAAQV,EAAMT,GAMlC,IAAIgG,GAAWhG,EAASC,QAAUZ,KAAKwG,IAAI/E,GAASA,EAChDE,EAAU3B,KAAKwG,IAAIpF,EAAKQ,aAC5B,OAAIjB,GAAS+F,iBACFC,EAAW,IAAMhF,EAEjBgF,EAAW,IAAMhF,EAAU,IAAME,KAIhDgE,IAAK,cACLjG,MAAO,SAAqBgH,EAAKjG,GAC7B,IAAKiG,EACD,MAAO,KAEXA,GAAMA,EAAIR,MAAM,KAAKC,KAAK,GAC1B,IAAIQ,GAAeD,EAAIN,MAAMtG,KAAKkG,WAClC,KAAKW,EACD,MAAO,KAEX,IAAIpF,GAAQoF,EAAa,IAAM,GAC3BlF,EAAUkF,EAAa,IAAM,GAC7BhF,EAAOgF,EAAa,IAAM,GAC1BzF,EAAO,GAAIN,MAAK,GAChBgG,EAAavC,SAAS9C,EAAO,IAC7BsF,EAAexC,SAAS5C,EAAS,GAIrC,OAHAmF,GAAa9G,KAAKwE,MAAMsC,GAAc,EAAIA,EAC1CC,EAAe/G,KAAKwE,MAAMuC,GAAgB,EAAIA,EAE1CD,EAAa,GACN,KAEPC,EAAe,GACR,MAEPD,GAAc,GACa,OAAvBjF,EAAKmF,cACL5F,EAAK8C,SAAS4C,EAAa,IAE3B1F,EAAK8C,SAAS4C,GAGS,OAAvBjF,EAAKmF,cACL5F,EAAK8C,SAAS4C,EAAa,IAE3B1F,EAAK8C,SAAS4C,GAGtB1F,EAAK6C,WAAW8C,GACT3F,OAIR6E,IAGX1F,SAAQtB,OAAO,iBAAiBa,QAAQ,sBAAuB,WAC3D,MAAO,IAAImG,KAEfpH,EAAAA,WAAkBoH,OACZgB,GAAG,SAAS1I,EAAQU,EAAOJ,GACjC,YAGA0B,SAAQtB,OAAO,8BACJ","file":"angular-kk-timepicker.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nrequire('./module');\n\nrequire('./factories/timepickerFactory');\n\nrequire('./directives/timpicker');\n},{\"./directives/timpicker\":2,\"./factories/timepickerFactory\":3,\"./module\":4}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nrequire('../factories/timepickerFactory');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } ///<reference path=\"./timepicker.d.ts\" />\n///<reference path=\"../factories/timepickerFactory.d.ts\" />\n///<reference path=\"../../typings/tsd.d.ts\" />\n\nvar Timepicker = function Timepicker(factory) {\n    var _this = this;\n\n    _classCallCheck(this, Timepicker);\n\n    this.link = function (scope, element, attrs, modelCtrl) {\n        var $input = angular.element(element[0].querySelector('.js-input')),\n            UP = 38,\n            DOWN = 40,\n            factory = _this.factory;\n        var settings = {\n            addZero: true,\n            default: function _default() {\n                return new Date();\n            }\n        };\n        settings = angular.extend(settings, scope.settings);\n        scope.$watch('date', function (newValue, oldValue) {\n            if (newValue === oldValue && !modelCtrl.$viewValue) {\n                scope.date = settings.default();\n                var value = factory.formatString(scope.date, settings);\n                modelCtrl.$setViewValue(value);\n                $input.val(value);\n            }\n            if (modelCtrl.$viewValue) {\n                scope.date = factory.parseString(modelCtrl.$viewValue, settings);\n            }\n            if (!newValue) {\n                return;\n            }\n            scope.hours = factory.getHours(scope.date, settings);\n            scope.minutes = factory.getMinutes(scope.date, settings);\n            scope.flag = factory.getFlag(scope.date, settings);\n        }, true);\n        modelCtrl.$formatters.push(function (value) {\n            return factory.convert(value, settings) || value;\n        });\n        modelCtrl.$parsers.push(function (value) {\n            return factory.convert(value, settings) || value;\n        });\n        var error = 'timeStringParse';\n        modelCtrl.$validators[error] = function (modelValue) {\n            return !!factory.convert(modelValue, settings);\n        };\n        var changeModel = function changeModel() {\n            var value = factory.formatString(scope.date, settings);\n            $input.val(value);\n            modelCtrl.$setViewValue(value);\n        };\n        var calcSelection = function calcSelection(cursorStart, value) {\n            var start = undefined;\n            var end = undefined;\n            if (cursorStart <= 2) {\n                start = 0;\n                end = 2;\n            } else if (cursorStart > 2 && cursorStart < 6) {\n                start = 3;\n                end = 5;\n            } else {\n                start = 6;\n                end = value.length;\n            }\n            return {\n                start: start,\n                end: end\n            };\n        };\n        $input.on('focusin', function (e) {\n            var input = $input[0];\n            var value = $input.val();\n            var valueIsValid = factory.checkValidity(value);\n            if (!valueIsValid) {\n                return;\n            }\n            setTimeout(function () {\n                var cursorStart = input.selectionStart;\n                var selection = calcSelection(cursorStart, value);\n                input.setSelectionRange(selection.start, selection.end);\n            });\n        });\n        $input.on('keydown', function (keyDownEvent) {\n            var switchPosition = function switchPosition(value) {\n                var inputValue = $input.val();\n                var input = $input[0];\n                var cursorStart = input.selectionStart;\n                if (cursorStart <= 2) {\n                    scope.addHours(value);\n                } else if (cursorStart > 2 && cursorStart < 6) {\n                    scope.addMinutes(value);\n                } else {\n                    scope.changeFlag(value);\n                }\n                var selection = calcSelection(cursorStart, inputValue);\n                input.setSelectionRange(selection.start, selection.end);\n            };\n            if (keyDownEvent.which === DOWN) {\n                switchPosition(-1);\n                keyDownEvent.preventDefault();\n            } else if (keyDownEvent.which === UP) {\n                switchPosition(1);\n                keyDownEvent.preventDefault();\n            }\n        });\n        $input.on('blur', function () {\n            $input.off('kydown.kktimepicker');\n        });\n        $input.on('change', function () {\n            var value = factory.convert($input.val(), settings);\n            scope.date = factory.parseString(value, settings);\n            if (scope.date) {\n                changeModel();\n            }\n        });\n        modelCtrl.$render = function () {\n            scope.date = factory.parseString(modelCtrl.$viewValue, settings);\n            $input.val(modelCtrl.$viewValue);\n        };\n        scope.togglePopover = function () {\n            scope.popoverIsOpen = !scope.popoverIsOpen;\n        };\n        scope.addMinutes = function (value) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getMinutes();\n            scope.date.setMinutes(current + value);\n            changeModel();\n        };\n        scope.changeFlag = function () {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getHours();\n            if (current === 0) {\n                scope.date.setHours(12);\n                changeModel();\n            } else if (current === 12) {\n                scope.date.setHours(0);\n                changeModel();\n            } else {\n                scope.addHours(12);\n            }\n        };\n        scope.addHours = function (value) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            var current = scope.date.getHours();\n            scope.date.setHours(current + value);\n            scope.hours = factory.getHours(scope.date, settings);\n            changeModel();\n        };\n        scope.changeTimeFromPopover = function (value, type) {\n            if (!scope.date) {\n                scope.date = settings.default();\n            }\n            if (type === 'flag') {\n                if (value.toUpperCase() === 'AM' && scope.date.getHours() > 12) {\n                    scope.addHours(12);\n                    return;\n                }\n                if (value.toUpperCase() === 'PM' && scope.date.getHours() <= 12) {\n                    scope.addHours(12);\n                    return;\n                }\n            } else {\n                var parsedValue = parseInt(value, 10);\n                if (factory.isNaN(parsedValue)) {\n                    value = '';\n                    return;\n                }\n                if (type === 'minute') {\n                    scope.date.setMinutes(parsedValue);\n                }\n                if (type === 'hour') {\n                    scope.date.setHours(parsedValue);\n                }\n                changeModel();\n            }\n        };\n        scope.closePopover = function () {\n            scope.popoverIsOpen = false;scope.$digest();\n        };\n        angular.element(document).on('click', scope.closePopover);\n        scope.$on('$destroy', function () {\n            angular.element(document).off('click', scope.closePopover);\n        });\n    };\n    this.scope = {\n        settings: '=',\n        ngDisabled: '='\n    };\n    this.priority = 101;\n    this.replace = true;\n    this.require = 'ngModel';\n    this.templateUrl = 'directives/kk.timepicker.tpl.html';\n    this.factory = factory;\n};\n\nangular.module('kk.timepicker').directive('kkTimepicker', ['kkTimepickerFactory', function (kkTimepickerFactory) {\n    return new Timepicker(kkTimepickerFactory);\n}]);\nexports.default = Timepicker;\n},{\"../factories/timepickerFactory\":3}],3:[function(require,module,exports){\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n///<reference path=\"../../typings/tsd.d.ts\" />\n///<reference path=\"./timepickerFactory.d.ts\" />\n\nvar TimepickerFactory = (function () {\n    function TimepickerFactory() {\n        _classCallCheck(this, TimepickerFactory);\n\n        this.timeRegExp = new RegExp('^([0-2]?[0-9]|2[0-3]|3[0-3])\\s{0,}?[:]?\\s{0,}([0-5][0-9]|[0-9])?\\s{0,}?(am|pm|AM|PM)?$');\n    }\n\n    _createClass(TimepickerFactory, [{\n        key: 'checkValidity',\n        value: function checkValidity(value) {\n            return !!value.split(' ').join('').match(this.timeRegExp);\n        }\n    }, {\n        key: 'formatDigit',\n        value: function formatDigit(digit, addZero) {\n            return addZero ? this.pad(digit) : '' + digit;\n        }\n    }, {\n        key: 'getFlag',\n        value: function getFlag(date, settings) {\n            var hours = date.getHours();\n            return hours < 12 ? 'AM' : 'PM';\n        }\n    }, {\n        key: 'getMinutes',\n        value: function getMinutes(date, settings) {\n            return this.formatDigit(date.getMinutes(), true);\n        }\n    }, {\n        key: 'getHours',\n        value: function getHours(date, settings) {\n            var hours = date.getHours();\n            // return 24 format\n            if (settings.use24HoursFormat) {\n                return this.formatDigit(hours, settings.addZero);\n            }\n            // if 12 hours\n            if (hours === 12 || hours === 0) {\n                return '12';\n            }\n            // if more then 12 ours\n            if (hours > 12) {\n                return this.formatDigit(hours - 12, settings.addZero);\n            }\n            // other\n            return this.formatDigit(hours, settings.addZero);\n        }\n    }, {\n        key: 'pad',\n        value: function pad(value) {\n            return value < 10 ? '0' + value : '' + value;\n        }\n    }, {\n        key: 'isNaN',\n        value: function isNaN(value) {\n            return value !== value;\n        }\n    }, {\n        key: 'convert',\n        value: function convert(value, settings) {\n            var date = this.parseString(value, settings);\n            return date ? this.formatString(date, settings) : '';\n        }\n    }, {\n        key: 'formatString',\n        value: function formatString(date, settings) {\n            var flag = undefined;\n            var hours = undefined;\n            var value = date.getHours();\n            if (!settings.use24HoursFormat) {\n                if (value === 12 || value === 0) {\n                    flag = this.getFlag(date, settings);\n                    hours = 12;\n                } else if (value > 12) {\n                    hours = value - 12;\n                    flag = this.getFlag(date, settings);\n                } else {\n                    hours = value;\n                    flag = this.getFlag(date, settings);\n                }\n            } else {\n                hours = value;\n                flag = this.getFlag(date, settings);\n            }\n            var hoursStr = settings.addZero ? this.pad(hours) : hours;\n            var minutes = this.pad(date.getMinutes());\n            if (settings.use24HoursFormat) {\n                return hoursStr + ':' + minutes;\n            } else {\n                return hoursStr + ':' + minutes + ' ' + flag;\n            }\n        }\n    }, {\n        key: 'parseString',\n        value: function parseString(str, settings) {\n            if (!str) {\n                return null;\n            }\n            str = str.split(' ').join('');\n            var parseResults = str.match(this.timeRegExp);\n            if (!parseResults) {\n                return null;\n            }\n            var hours = parseResults[1] || '';\n            var minutes = parseResults[2] || '';\n            var flag = parseResults[3] || '';\n            var date = new Date(0);\n            var hoursValue = parseInt(hours, 10);\n            var minutesValue = parseInt(minutes, 10);\n            hoursValue = this.isNaN(hoursValue) ? 0 : hoursValue;\n            minutesValue = this.isNaN(minutesValue) ? 0 : minutesValue;\n            // hack @todo needs to remake reg exp\n            if (hoursValue > 24) {\n                return null;\n            }\n            if (minutesValue > 59) {\n                return null;\n            }\n            if (hoursValue >= 12) {\n                if (flag.toLowerCase() === 'am') {\n                    date.setHours(hoursValue - 12);\n                } else {\n                    date.setHours(hoursValue);\n                }\n            } else {\n                if (flag.toLowerCase() === 'pm') {\n                    date.setHours(hoursValue + 12);\n                } else {\n                    date.setHours(hoursValue);\n                }\n            }\n            date.setMinutes(minutesValue);\n            return date;\n        }\n    }]);\n\n    return TimepickerFactory;\n})();\n\nangular.module('kk.timepicker').factory('kkTimepickerFactory', function () {\n    return new TimepickerFactory();\n});\nexports.default = TimepickerFactory;\n},{}],4:[function(require,module,exports){\n'use strict';\n\n///<reference path=\"../typings/tsd.d.ts\" />\nangular.module('kk.timepicker', []);\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}