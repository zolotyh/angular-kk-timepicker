!function e(t,r,n){function o(i,u){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";e("./module"),e("./factories/timepickerFactory"),e("./directives/timpicker")},{"./directives/timpicker":2,"./factories/timepickerFactory":3,"./module":4}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),e("../factories/timepickerFactory");var o=function a(e){var t=this;n(this,a),this.link=function(e,r,n,o){var a=angular.element(r[0].querySelector(".js-input")),i=t.factory,u="",s={addZero:!0,"default":function(){return new Date}},c=function(){console.log(123)};r.on("focus",function(){console.log("focus"),angular.element(t).on("keyup",c)}),r.on("blur",function(){console.log("blur"),angular.element(t).off("keyup",c)}),s=angular.extend(s,e.settings),e.$watch("date",function(t,r){if(t===r&&!o.$viewValue){e.date=s["default"]();var n=i.formatString(e.date,s);o.$setViewValue(n),a.val(n)}o.$viewValue&&(e.date=i.parseString(o.$viewValue,s)),t&&(e.hours=i.getHours(e.date,s),e.minutes=i.getMinutes(e.date,s),e.flag=i.getFlag(e.date,s))},!0),o.$formatters.push(function(e){return i.convert(e,s)||e}),o.$parsers.push(function(e){return i.convert(e,s)||e});var l="timeStringParse";o.$validators[l]=function(e){return!!i.convert(e,s)};var f=function(){var t=i.formatString(e.date,s);a.val(t),o.$setViewValue(t)};a.on("change",function(){var t=i.convert(a.val(),s);e.date=i.parseString(t,s),e.date&&f()}),a.on("focus",function(){u=a.val(),e.closePopover(),a.val("")}),a.on("blur",function(){!a.val()&&u&&a.val(u)}),a.on("keyup",function(){u=""}),o.$render=function(){e.date=i.parseString(o.$viewValue,s),a.val(o.$viewValue)},e.togglePopover=function(){e.popoverIsOpen=!e.popoverIsOpen},e.addMinutes=function(t){e.date||(e.date=s["default"]());var r=e.date.getMinutes();e.date.setMinutes(r+t),f()},e.changeFlag=function(){e.date||(e.date=s["default"]());var t=e.date.getHours();0===t?(e.date.setHours(12),f()):12===t?(e.date.setHours(0),f()):e.addHours(12)},e.addHours=function(t){e.date||(e.date=s["default"]());var r=e.date.getHours();e.date.setHours(r+t),e.hours=i.getHours(e.date,s),f()},e.changeTimeFromPopover=function(t,r){if(e.date||(e.date=s["default"]()),"flag"===r){if("AM"===t.toUpperCase()&&e.date.getHours()>12)return void e.addHours(12);if("PM"===t.toUpperCase()&&e.date.getHours()<=12)return void e.addHours(12)}else{var n=parseInt(t,10);if(i.isNaN(n))return void(t="");"minute"===r&&e.date.setMinutes(n),"hour"===r&&e.date.setHours(n),f()}},e.closePopover=function(){e.popoverIsOpen=!1,e.$digest()},angular.element(document).on("click",e.closePopover),e.$on("$destroy",function(){angular.element(document).off("click",e.closePopover)})},this.scope={settings:"="},this.replace=!0,this.require="ngModel",this.templateUrl="directives/kk.timepicker.tpl.html",this.factory=e};angular.module("kk.timepicker").directive("kkTimepicker",["kkTimepickerFactory",function(e){return new o(e)}]),r["default"]=o},{"../factories/timepickerFactory":3}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(){n(this,e),this.timeRegExp=new RegExp("^([0-2]?[0-9]|2[0-3]|3[0-3])s{0,}?[:]?s{0,}([0-5][0-9]|[0-9])?s{0,}?(am|pm|AM|PM)?$")}return o(e,[{key:"formatDigit",value:function(e,t){return t?this.pad(e):""+e}},{key:"getFlag",value:function(e,t){var r=e.getHours();return 12>r?"AM":"PM"}},{key:"getMinutes",value:function(e,t){return this.formatDigit(e.getMinutes(),!0)}},{key:"getHours",value:function(e,t){var r=e.getHours();return t.use24HoursFormat?this.formatDigit(r,t.addZero):12===r||0===r?"12":r>12?this.formatDigit(r-12,t.addZero):this.formatDigit(r,t.addZero)}},{key:"pad",value:function(e){return 10>e?"0"+e:""+e}},{key:"isNaN",value:function(e){return e!==e}},{key:"convert",value:function(e,t){var r=this.parseString(e,t);return r?this.formatString(r,t):""}},{key:"formatString",value:function(e,t){var r=void 0,n=void 0,o=e.getHours();t.use24HoursFormat?(n=o,r=this.getFlag(e,t)):12===o||0===o?(r=this.getFlag(e,t),n=12):o>12?(n=o-12,r=this.getFlag(e,t)):(n=o,r=this.getFlag(e,t));var a=t.addZero?this.pad(n):n,i=this.pad(e.getMinutes());return t.use24HoursFormat?a+":"+i:a+":"+i+" "+r}},{key:"parseString",value:function(e,t){if(!e)return null;e=e.split(" ").join("");var r=e.match(this.timeRegExp);if(!r)return null;var n=r[1]||"",o=r[2]||"",a=r[3]||"",i=new Date(0),u=parseInt(n,10),s=parseInt(o,10);return u=this.isNaN(u)?0:u,s=this.isNaN(s)?0:s,u>24?null:s>59?null:(u>=12?"am"===a.toLowerCase()?i.setHours(u-12):i.setHours(u):"pm"===a.toLowerCase()?i.setHours(u+12):i.setHours(u),i.setMinutes(s),i)}}]),e}();angular.module("kk.timepicker").factory("kkTimepickerFactory",function(){return new a}),r["default"]=a},{}],4:[function(e,t,r){"use strict";angular.module("kk.timepicker",[])},{}]},{},[1]);
//# sourceMappingURL=angular-kk-timpickermin.js.map
